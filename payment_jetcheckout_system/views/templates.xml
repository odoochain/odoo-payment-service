<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="payment_form" inherit_id="payment_jetcheckout.payment_form">
        <xpath expr="//div[@id='payment_card']/div" position="inside">
            <input t-if="advance" type="hidden" t-att-value="advance" field="advance"/>
            <input t-if="system" type="hidden" t-att-value="system" field="system"/>
            <input t-if="subsystem" type="hidden" t-att-value="subsystem" field="subsystem"/>
        </xpath>
    </template>

    <template id="payment_sidebar" inherit_id="payment_jetcheckout.payment_sidebar">
        <xpath expr="//input[@field='amount']" position="attributes">
            <attribute name="t-att-value">language.format('%.{0}f'.format(currency.decimal_places), amount or 0, grouping=True, monetary=True)</attribute>
        </xpath>
        <xpath expr="//input[@field='partner']" position="after">
            <input type="hidden" name="vat" t-att-value="vat" field="vat"/>
        </xpath>
    </template>

    <template id="payment_footer" name="Payment System Page Footer">
        <div class="row mx-0 flex-column">
            <div class="row mx-0 mt-4 pb-1 border-bottom">
                <div class="col-md-12 text-center text-md-left">
                    <ul class="mb-0 list-inline payment_icon_list">
                        <t t-foreach="card_family" t-as="card">
                            <li class="list-inline-item">
                                <img t-att-src="card" alt="" height="40" class="card p-2"/>
                            </li>
                        </t>
                    </ul>
                </div>
            </div>
            <div class="row mx-0 pt-2 h-0">
                <div class="col-md-6 text-center text-md-left">
                    <ul class="list-inline payment_icon_list">
                        <t t-foreach="acquirer.payment_icon_ids" t-as="pm_icon">
                            <li class="list-inline-item">
                                <span t-field="pm_icon.image_payment_form" t-options='{"widget": "image", "alt-field": "name"}'/>
                            </li>
                        </t>
                    </ul>
                </div>
                <div class="col-md-6 text-center text-md-right">
                    <t t-raw="footer"/>
                </div>
            </div>
        </div>
    </template>

    <template id="payment_contact" name="Payment System Page Contact">
        <div t-attf-class="row mx-0 shadow p-3 bg-light small text-primary card card-header-tabs font-weight-bold #{classes}">
            If you need assistance, you can contact with us by using one of the following methods.
        </div>
        <div t-attf-class="row mx-0 table-responsive bg-white border card overflow-auto mb-3 #{classes}">
            <table class="table table-sm small mb-0">
                <tr>
                    <td class="text-right text-nowrap w-md-25"><i class="fa fa-phone mr-2" t-translation="off"/></td>
                    <td class="text-nowrap">Phone</td>
                    <td class="text-nowrap"><a t-esc="company.phone" t-attf-href="tel:#{company.phone}"/></td>
                </tr>
                <tr>
                    <td class="text-right text-nowrap"><i class="fa fa-whatsapp mr-2" t-translation="off"/></td>
                    <td class="text-nowrap">Whatsapp</td>
                    <td class="text-nowrap"><a t-esc="company.mobile" t-attf-href="https://wa.me/#{company.mobile}"/></td>
                </tr>
                <tr>
                    <td class="text-right text-nowrap"><i class="fa fa-envelope mr-2" t-translation="off"/></td>
                    <td class="text-nowrap">Email</td>
                    <td class="text-nowrap"><a t-esc="company.email" t-attf-href="mailto:#{company.email}"/></td>
                </tr>
                <tr>
                    <td class="text-right text-nowrap"><i class="fa fa-link mr-2" t-translation="off"/></td>
                    <td class="text-nowrap">Link</td>
                    <td class="text-nowrap"><a href="#" field="payment.link">Get payment link</a></td>
                </tr>
            </table>
        </div>
    </template>

    <template id="payment_agreement" name="Payment System Page Agreements">
        <t t-if="sidebar">
            <div t-attf-class="row mx-0 shadow p-3 bg-light small text-primary card card-header-tabs font-weight-bold #{classes}">
                Agreements
            </div>
            <div t-attf-class="row mx-0 table-responsive bg-white border card overflow-auto #{classes}">
                <table class="table table-sm small mb-0">
                    <tr>
                        <td><a href="#" class="d-block w-100" field="payment.privacy">Privacy Policy</a></td>
                    </tr>
                    <tr>
                        <td><a href="#" class="d-block w-100" field="payment.agreement">Distant Sale Agreement</a></td>
                    </tr>
                    <tr>
                        <td><a href="#" class="d-block w-100" field="payment.membership">Membership Agreement</a></td>
                    </tr>
                    <tr>
                        <td><a href="#" class="d-block w-100" field="payment.contact">Contact Page</a></td>
                    </tr>
                </table>
            </div>
        </t>
        <t t-else="">
            <div class="row mx-5 my-3 justify-content-around">
                <button class="btn btn-secondary bg-white text-primary m-2 w-md-auto" style="width: 100%" field="payment.privacy">Privacy Policy</button>
                <button class="btn btn-secondary bg-white text-primary m-2 w-md-auto" style="width: 100%" field="payment.agreement">Distant Sale Agreement</button>
                <button class="btn btn-secondary bg-white text-primary m-2 w-md-auto" style="width: 100%" field="payment.membership">Membership Agreement</button>
                <button class="btn btn-secondary bg-white text-primary m-2 w-md-auto" style="width: 100%" field="payment.contact">Contact Page</button>
            </div>
        </t>
    </template>

    <template id="payment_state" name="Payment System Page Result">
        <t t-if="tx">
            <div t-if="tx.state == 'error'" t-attf-class="row alert alert-danger text-center justify-content-center flex-column #{classes}">
                <div>Your transaction has been failed. Please try again. If this situation occurs anyway, please contact with system administation.</div>
                <small class="d-block mt-1" t-esc="tx.state_message"/>
            </div>
            <div t-elif="tx.state == 'done'" t-attf-class="row alert alert-success text-center justify-content-center flex-column mt-4 my-2 #{classes}">
                <div class="w-100">Your transaction has been succeeded. Thank you.</div>
                <div class="row mt-2 justify-content-center">
                    <div class="m-1" style="width:200px;"><a t-attf-href="/payment/card/report/receipt/#{tx.jetcheckout_order_id}" class="btn btn-secondary btn-block font-weight-bold text-uppercase" target="_blank"><i class="fa fa-file-text-o mr-2" t-translation="off"/>Receipt</a></div>
                    <div class="m-1" style="width:200px;"><a t-attf-href="/payment/card/report/conveyance/#{tx.jetcheckout_order_id}" class="btn btn-secondary btn-block font-weight-bold text-uppercase" target="_blank"><i class="fa fa-edit mr-2" t-translation="off"/>Conveyance</a></div>
                    <div t-if="request.env.company.payment_page_ok and (request.env.user.share or not request.env.user.share and request.env.user.payment_page_ok)" class="m-1" style="width:200px;"><a href="/my/payment" class="btn btn-secondary btn-block font-weight-bold text-uppercase"><i class="fa fa-money mr-2" t-translation="off"/>New Payment</a></div>
                </div>
            </div>
            <div t-else="" t-attf-class="row alert alert-danger text-center justify-content-center flex-column #{classes}">
                <div>Your transaction status: <span t-field="tx.state"/>. Please try again. If this situation occurs anyway, please contact with system administation.</div>
                <small class="d-block mt-1" t-esc="tx.state_message"/>
            </div>
        </t>
    </template>


    <template id="payment_company" name="Payment System Page Companies">
        <div t-if="len(companies) > 1 or len(tags) > 1" class="d-flex flex-column" style="gap: 5px;">
            <div t-if="len(companies) > 1" class="d-flex flex-wrap h-fit" style="gap: 5px;">
                <t t-foreach="companies" t-as="c">
                    <button t-attf-class="btn btn-light d-flex flex-nowrap flex-row p-1 pr-2 rounded-pill align-items-center #{'bg-primary text-white' if c.id == company.id else 'bg-primary-light'}" style="gap: 5px;" t-att-data-id="c.id" field="payment.company">
                        <div class="align-items-center bg-white d-flex justify-content-center overflow-hidden rounded-circle" style="width: 32px; height: 32px; padding: 2px;">
                            <img t-att-src="'/p/company/%s/logo' % c.id" t-att-alt="c.name" class="w-100"/>
                        </div>
                        <div class="align-items-center d-flex flex-fill overflow-hidden small text-nowrap" style="text-overflow: ellipsis; max-width: 200px;">
                            <t t-esc="c.name"/>
                        </div>
                    </button>
                </t>
            </div>
            <div t-if="len(tags) > 1">
                <t t-foreach="tags" t-as="t">
                    <button t-attf-class="btn btn-light py-1 px-3 badge badge-pill justify-content-center #{'bg-primary text-white' if t.id in partner.category_id.ids else 'bg-primary-light'}" t-att-data-id="t.id" field="payment.tag">
                        <t t-esc="t.name"/>
                    </button>
                </t>
            </div>
        </div>
    </template>

    <template id="page_payment" name="Payment System Page">
        <t t-call="web.frontend_layout">
            <t t-set="no_header" t-value="True"/>
            <t t-set="no_footer" t-value="True"/>
            <t t-set="s2s" t-value="True"/>
            <t t-set="dynamic" t-value="flow == 'dynamic'"/>
            <t t-set="class" t-value="True"/>
            <t t-set="title" t-value="website.name"/>
            <t t-set="body_classname" t-value="'payment-page navbar-light'"/>
            <t t-set="x_icon" t-value="'/web/image?model=website&amp;id=%s&amp;field=favicon' % website.id"/>
            <t t-set="language" t-value="request.env['res.lang']._lang_get(request.env.lang)"/>
            <div class="header row mx-0 bg-white border p-2 px-lg-2">
                <div>
                    <img t-att-src="'/web/image/res.company/%s/logo' % company.id" t-att-alt="company.name" class="o_company_logo"/>
                </div>
            </div>
            <div class="payment-system position-relative overflow-hidden">
                <t t-if="dynamic">
                    <div name="wizard" class="payment-dynamic navbar-light pt-4 flex-wrap flex-row-reverse">
                        <div class="col-md-9 d-flex navbar-light">
                            <div class="card position-relative w-100">
                                <!--<div class="payment-card-section d-flex fade" field="wizard.page.section.all">
                                    <div class="position-relative" field="wizard.page.section.amount">
                                        <div><em class="fa fa-tag fa-bounce-rotate"/></div>
                                        <div>Amount</div>
                                        <div class="small">0.00</div>
                                    </div>
                                    <div class="position-relative" field="wizard.page.section.card">
                                        <div><em class="fa fa-credit-card-alt fa-bounce-rotate"/></div>
                                        <div>Credit Card</div>
                                        <div class="small">**** **** **** ****</div>
                                    </div>
                                    <div class="position-relative" field="wizard.page.section.installment">
                                        <div><em class="fa fa-money fa-bounce-rotate"/></div>
                                        <div>Installment</div>
                                        <div class="small">Single Payment</div>
                                    </div>
                                </div>-->
                                <div class="payment-card-item d-flex fade show p-3" field="wizard.page.loading">
                                    <div class="m-auto">
                                        <!--<em class="fa fa-4x fa-circle-o-notch fa-rotate text-primary"/>-->
                                    </div>
                                </div>
                                <div class="payment-card-item fade p-3" field="wizard.page.login">
                                    <div class="align-items-center d-flex flex-column justify-content-center">
                                        <div class="bg-white">
                                            <img src="/payment_jetcheckout_system/static/src/img/money.gif" class="payment-card-item-icon shadow m-0"/>
                                        </div>
                                        <div name="welcome" class="font-weight-bold h2 my-3 text-primary">
                                            Welcome
                                        </div>
                                        <div name="vat" class="font-weight-bold text-primary">
                                            Please enter your VAT number
                                        </div>
                                        <div>
                                            <div class="field-container">
                                                <input name="vat" type="text" inputmode="decimal" class="text-center border-primary" required="required" field="wizard.vat" t-att-value="vat"/>
                                                <span class="bar-container"/>
                                            </div>
                                        </div>
                                        <div class="py-5">
                                            <button class="btn px-4" field="wizard.button.login.done">Sign In<em class="fa fa-2x fa-sign-in fa-bounce-horizontal" t-translation="off"/></button>
                                        </div>
                                    </div>
                                </div>
                                <div name="register" class="payment-card-item fade p-3" field="wizard.page.register">
                                    <div class="d-flex flex-row w-100 position-absolute" style="z-index:2">
                                        <button class="btn btn-navigation" field="wizard.button.register.prev"><i class="fa fa-chevron-left" t-translation="off"/>Back</button>
                                    </div>
                                    <div class="align-items-center d-flex flex-column justify-content-center">
                                        <!--<div class="bg-white">
                                            <img src="/payment_jetcheckout_system/static/src/img/money.gif" class="payment-card-item-icon shadow m-0"/>
                                        </div>-->
                                        <div name="title" class="font-weight-bold h2 my-3 text-primary">
                                            Register
                                        </div>
                                        <div name="text" class="font-weight-bold text-primary my-3">
                                            Please fill the required fields
                                        </div>
                                        <div name="fields" class="d-flex" style="gap:1em">
                                            <div class="d-flex flex-column" style="gap:1em">
                                                <div class="field-container">
                                                    <input type="text" class="text-center border-primary" required="required" field="wizard.register.name"/>
                                                    <span class="bar-container"/>
                                                    <label class="text-primary"><span>Name</span></label>
                                                </div>
                                                <div class="field-container">
                                                    <input type="text" inputmode="decimal" class="text-center border-primary" required="required" field="wizard.register.vat"/>
                                                    <span class="bar-container"/>
                                                    <label class="text-primary"><span>ID Number</span></label>
                                                </div>
                                                <div class="field-container">
                                                    <input type="text" class="text-center border-primary" required="required" field="wizard.register.email"/>
                                                    <span class="bar-container"/>
                                                    <label class="text-primary"><span>Email</span></label>
                                                </div>
                                                <div class="field-container">
                                                    <input type="text" inputmode="decimal" class="text-center border-primary" required="required" field="wizard.register.phone"/>
                                                    <span class="bar-container"/>
                                                    <label class="text-primary"><span>Phone</span></label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="py-5">
                                            <button class="btn px-4" field="wizard.button.register.done">Sign Up<em class="fa fa-2x fa-sign-out fa-bounce-horizontal" t-translation="off"/></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="payment-card-item fade invisible p-3" field="wizard.page.welcome">
                                    <div class="d-flex flex-row w-100 fade position-absolute" style="z-index:2">
                                        <button class="btn btn-navigation" field="wizard.button.welcome.prev"><i class="fa fa-chevron-left" t-translation="off"/>Back</button>
                                    </div>
                                    <div class="align-items-center d-flex flex-column justify-content-center pb-5">
                                        <div class="fade welcome-box">
                                            <div class="welcome-title-top">
                                                <div style="top:0;z-index:1">
                                                    <span class="bg-white">
                                                        <img src="/payment_jetcheckout_system/static/src/img/card.gif" class="payment-card-item-icon shadow"/>
                                                    </span>
                                                </div>
                                                <div class="text-primary font-weight-bold">Hello</div>
                                            </div>
                                            <div class="welcome-title-bottom">
                                                <div class="align-items-center d-flex flex-column align-items-center justify-content-center">
                                                    <span class="text-primary font-weight-bold h2" field="wizard.partner"><t t-esc="partner.name"/></span>
                                                    <span class="fade mt-5">
                                                        <button class="btn m-auto" field="wizard.button.welcome.done">Proceed to payment<em class="fa fa-chevron-down fa-bounce" t-translation="off"/></button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="payment-card-item fade invisible p-3" field="wizard.page.amount">
                                    <div class="d-flex flex-row w-100 position-absolute" style="z-index:2">
                                        <button class="btn btn-navigation" field="wizard.button.amount.prev"><i class="fa fa-chevron-left" t-translation="off"/>Back</button>
                                    </div>
                                    <div class="align-items-center d-flex flex-column justify-content-center">
                                        <div class="bg-white">
                                            <img src="/payment_jetcheckout_system/static/src/img/price.gif" class="payment-card-item-icon shadow m-0"/>
                                        </div>
                                        <div class="font-weight-bold h2 my-3 text-primary">
                                            Amount to Pay
                                        </div>
                                        <div class="payment-card-item-amount">
                                            <div class="field-container">
                                                <input name="amount" type="text" inputmode="decimal" class="text-center border-primary" required="required" t-att-placeholder="language.format('%.{0}f'.format(currency.decimal_places), 0, grouping=True, monetary=True)" t-att-value="amount and language.format('%.{0}f'.format(currency.decimal_places), amount, grouping=True, monetary=True) or None" field="wizard.amount"/>
                                                <span class="bar-container"/>
                                                <span t-if="currency.position == 'before'" class="symbol symbol-before" t-esc="currency.symbol"/>
                                                <span t-else="" class="symbol symbol-after" t-esc="currency.symbol"/>
                                                <input type="hidden" t-att-data-separator="language.decimal_point" t-att-data-thousand="language.thousands_sep" t-att-data-decimal="currency.decimal_places" t-att-data-name="currency.name" t-att-data-id="currency.id" t-att-data-position="currency.position" t-att-data-symbol="currency.symbol" field="currency"/>
                                            </div>
                                            <button class="btn btn-primary shadow" field="wizard.button.amount.currency">
                                                <span t-esc="currency.name"/>
                                                <t t-if="len(currencies) > 1">
                                                    <i class="fa fa-caret-down" t-translation="off"/>
                                                    <ul>
                                                        <t t-foreach="currencies" t-as="curr">
                                                            <li t-esc="curr.name" t-att-data-separator="language.decimal_point" t-att-data-thousand="language.thousands_sep" t-att-data-decimal="curr.decimal_places" t-att-data-name="curr.name" t-att-data-id="curr.id" t-att-data-position="curr.position" t-att-data-symbol="curr.symbol"/>
                                                        </t>
                                                    </ul>
                                                </t>
                                            </button>
                                        </div>
                                        <div class="py-5">
                                            <button class="btn" field="wizard.button.amount.done">Enter credit card details<em class="fa fa-2x fa-credit-card fa-bounce" t-translation="off"/></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 d-flex navbar-light">
                            <div class="mx-2 shine navbar-light"/>
                        </div>
                    </div>
                    <div field="wizard.page.overlay"/>
                </t>
                <div t-attf-class="payment-card row justify-content-center mx-0 #{dynamic and 'flex-row-reverse' or ''}">
                    <t t-if="dynamic">
                        <div class="col-md-9 row justify-content-center mx-0 navbar-light">
                            <t t-call="payment_jetcheckout.payment_form">
                                <t t-set="no_smart_buttons" t-value="True"/>
                            </t>
                            <input type="hidden" t-att-value="success_url" field="payment.successurl"/>
                            <input type="hidden" t-att-value="fail_url" field="payment.failurl"/>
                        </div>
                    </t>
                    <t t-call="payment_jetcheckout.payment_sidebar">
                        <t t-set="page" t-value="'payment'"/>
                        <t t-set="no_payment_icons" t-value="True"/>
                        <t t-set="no_card_preview" t-value="True"/>
                        <t t-if="not no_sidebar_buttons" t-set="buttons">
                            <a role="button" class="btn btn-outline-primary btn-block mt-3 font-weight-bold text-uppercase shadow text-nowrap overflow-hidden" href="/my/payment/transactions"><i class="fa fa-list mr-2" t-translation="off"/>Transactions</a>
                        </t>
                        <t t-call="payment_jetcheckout_system.payment_contact"/>
                        <t t-set="labels"/>
                    </t>
                    <t t-if="not dynamic">
                        <div class="col-md-9 row justify-content-center mx-0 navbar-light">
                            <t t-call="payment_jetcheckout.payment_form">
                                <t t-set="no_smart_buttons" t-value="True"/>
                            </t>
                            <input type="hidden" t-att-value="success_url" field="payment.successurl"/>
                            <input type="hidden" t-att-value="fail_url" field="payment.failurl"/>
                        </div>
                    </t>
                </div>
            </div>
            <t t-call="payment_jetcheckout_system.payment_agreement"/>
            <t t-call="payment_jetcheckout_system.payment_footer"/>
        </t>
    </template>

    <template id="page_login" name="Payment System Page Signin">
        <html>
            <body>
                <script>
                    let form = document.createElement('form');
                    let input = document.createElement('input');

                    form.setAttribute('action', '/my/payment');
                    form.setAttribute('method', 'POST');

                    input.setAttribute('type', 'hidden');
                    input.setAttribute('name', 'pid');
                    input.setAttribute('value', '<t t-esc="token"/>');
                    form.appendChild(input);

                    document.body.appendChild(form);
                    form.submit();
                </script>
            </body>
        </html>
    </template>

    <template id="page_result" name="Payment System Page Result">
        <t t-call="web.frontend_layout">
            <t t-set="no_header" t-value="True"/>
            <t t-set="no_footer" t-value="True"/>
            <t t-set="class" t-value="True"/>
            <t t-set="title" t-value="website.name"/>
            <t t-set="body_classname" t-value="'payment-page navbar-light'"/>
            <t t-set="x_icon" t-value="'/web/image?model=website&amp;id=%s&amp;field=favicon' % website.id"/>
            <div class="header row mx-0 card border p-2 px-lg-2">
                <div>
                    <img t-att-src="'/web/image/res.company/%s/logo' % company.id" t-att-alt="company.name" class="o_company_logo"/>
                </div>
            </div>
            <div class="payment-result row justify-content-center mx-0">
                <t t-call="payment_jetcheckout.payment_sidebar">
                    <t t-set="page" t-value="'result'"/>
                    <t t-set="no_payment_icons" t-value="True"/>
                    <t t-set="no_card_preview" t-value="True"/>
                    <t t-set="buttons">
                        <a role="button" class="btn btn-outline-primary btn-block mt-3 font-weight-bold text-uppercase shadow text-nowrap overflow-hidden" href="/my/payment"><i class="fa fa-undo mr-2" t-translation="off"/>Payment</a>
                        <a role="button" class="btn btn-outline-primary btn-block mt-3 font-weight-bold text-uppercase shadow text-nowrap overflow-hidden" href="/my/payment/transactions"><i class="fa fa-list mr-2" t-translation="off"/>Transactions</a>
                    </t>
                    <t t-call="payment_jetcheckout_system.payment_contact"/>
                </t>
                <div class="col-md-9 row justify-content-center mx-0 navbar-light">
                    <div class="px-3 py-4 bg-white card my-4 w-100">
                        <h4 t-if="tx and tx.state == 'done'" class="font-weight-bold m-3 p-3 text-center w-100">
                            <div class="text-center w-100">Payment is successful. Thank you.</div>
                            <div class="row w-100 mt-2">
                                <div class="p-3 col-md-6"><a t-attf-href="/payment/card/report/receipt/#{tx.jetcheckout_order_id}" class="btn btn-primary btn-block font-weight-bold text-uppercase" target="_blank"><i class="fa fa-file-text-o mr-2" t-translation="off"/>Receipt</a></div>
                                <div class="p-3 col-md-6"><a t-attf-href="/payment/card/report/conveyance/#{tx.jetcheckout_order_id}" class="btn btn-primary btn-block font-weight-bold text-uppercase" target="_blank"><i class="fa fa-edit mr-2" t-translation="off"/>Conveyance</a></div>
                            </div>
                        </h4>
                        <h4 t-elif="tx and tx.state == 'pending'" class="font-weight-bold m-3 p-3 text-center w-100">
                            <div class="mb-3 text-center w-100">Payment is successful, but it will be processed later.</div>
                            <span class="font-italic font-weight-light btn-sm">Transaction is done, but a technical error occured and we couldn't record your payment. Please contact with us for more information.</span>
                        </h4>
                        <h4 t-elif="not tx" class="font-weight-bold m-3 p-3 text-center w-100">
                            <div class="mb-3 text-center w-100">Payment is not exist.</div>
                            <span class="font-italic font-weight-light btn-sm">A technical error occured and we couldn't record your payment. Please contact with us for more information.</span>
                        </h4>
                        <h4 t-else="" class="font-weight-bold m-3 p-3 text-center w-100">
                            <div class="mb-3 text-center w-100">Payment is not successful. Please try again later.</div>
                            <span class="font-italic font-weight-light btn-sm">A technical error occured and we couldn't record your payment. Please contact with us for more information.</span>
                            <span t-esc="tx.state_message" class="font-italic font-weight-light btn-sm"/>
                        </h4>
                    </div>
                </div>
            </div>
            <t t-call="payment_jetcheckout_system.payment_agreement"/>
            <t t-call="payment_jetcheckout_system.payment_footer"/>
        </t>
    </template>

    <template id="page_transaction" name="Payment System Page Transactions">
        <t t-call="web.frontend_layout">
            <t t-set="no_header" t-value="True"/>
            <t t-set="no_footer" t-value="True"/>
            <t t-set="class" t-value="True"/>
            <t t-set="title" t-value="website.name"/>
            <t t-set="body_classname" t-value="'payment-page navbar-light'"/>
            <t t-set="x_icon" t-value="'/web/image?model=website&amp;id=%s&amp;field=favicon' % website.id"/>
            <div class="header row mx-0 card border p-2 px-lg-2">
                <div>
                    <img t-att-src="'/web/image/res.company/%s/logo' % company.id" t-att-alt="company.name" class="o_company_logo"/>
                </div>
            </div>
            <div class="payment-transaction row justify-content-center mx-0">
                <t t-call="payment_jetcheckout.payment_sidebar">
                    <t t-set="page" t-value="'transaction'"/>
                    <t t-set="no_payment_icons" t-value="True"/>
                    <t t-set="no_card_preview" t-value="True"/>
                    <t t-set="buttons">
                        <a role="button" class="btn btn-outline-primary btn-block mt-3 font-weight-bold text-uppercase shadow text-nowrap overflow-hidden" href="/my/payment"><i class="fa fa-undo mr-2" t-translation="off"/>Payment</a>
                    </t>
                    <t t-call="payment_jetcheckout_system.payment_contact"/>
                </t>
                <div class="col-md-9 row justify-content-center mx-0 navbar-light">
                    <div class="px-3 py-4 bg-white card my-4 w-100">
                        <table class="table table-borderless table-responsive-md w-100 table-fold small">
                            <thead>
                                <tr class="font-weight-bold border shadow">
                                    <th>Date</th>
                                    <th>Transaction</th>
                                    <th>Card Holder Name</th>
                                    <th>Card Number</th>
                                    <th class="text-right">Payment Amount</th>
                                    <th class="text-center">State</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="txs" t-as="tx">
                                    <tr class="border row-view">
                                        <td><span t-field="tx.create_date"/></td>
                                        <td><span t-field="tx.reference"/></td>
                                        <td><span t-field="tx.jetcheckout_card_name"/></td>
                                        <td><span t-field="tx.jetcheckout_card_number"/></td>
                                        <td class="text-right"><span t-field="tx.jetcheckout_payment_amount"/></td>
                                        <td class="border-right font-weight-bold text-center px-2"><span t-field="tx.state" t-attf-class="py-1 w-100 badge #{'badge-success' if tx.state == 'done' else 'badge-danger'}"/></td>
                                    </tr>
                                    <tr class="border shadow-lg row-fold">
                                        <td colspan="99">
                                            <table class="w-100">
                                                <tr class="font-weight-bold border">
                                                    <td class="pl-2">Commission Amount</td>
                                                    <td>Installment Count</td>
                                                    <td rowspan="2" class="border-left p-2">
                                                        <!--<a t-attf-href="/report/pdf/payment_jetcheckout.payment_receipt/#{tx.id}" class="btn btn-outline-primary btn-block font-weight-bold text-uppercase" target="_blank" title="Receipt"><i class="fa fa-file-text-o mr-2" t-translation="off"/></a>
                                                        <a t-attf-href="/report/pdf/payment_jetcheckout.payment_conveyance/#{tx.id}" class="btn btn-outline-primary btn-block font-weight-bold text-uppercase" target="_blank" title="Conveyance"><i class="fa fa-edit mr-2" t-translation="off"/></a>-->
                                                        <a t-attf-href="/report/html/payment_jetcheckout.payment_receipt/#{tx.id}" class="btn btn-outline-primary btn-block font-weight-bold text-uppercase" target="_blank" title="Receipt"><i class="fa fa-file-text-o mr-2" t-translation="off"/></a>
                                                        <a t-attf-href="/report/html/payment_jetcheckout.payment_conveyance/#{tx.id}" class="btn btn-outline-primary btn-block font-weight-bold text-uppercase" target="_blank" title="Conveyance"><i class="fa fa-edit mr-2" t-translation="off"/></a>
                                                    </td>
                                                </tr>
                                                <tr class="border">
                                                    <td class="pl-2"><span t-field="tx.jetcheckout_customer_amount"/></td>
                                                    <td><span t-field="tx.jetcheckout_installment_count"/></td>
                                                </tr>
                                                <tr class="border">
                                                    <td colspan="5" class="text-left pl-2"><span class="font-weight-bold">Message:</span> <span t-field="tx.state_message"/></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                    <div class="form-inline justify-content-center mt-3">
                        <t t-call="website.pager"/>
                    </div>
                </div>
            </div>
            <t t-call="payment_jetcheckout_system.payment_agreement"/>
            <t t-call="payment_jetcheckout_system.payment_footer"/>
        </t>
    </template>
</odoo>
