<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-inherit="point_of_sale.PaymentScreen" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[@class='paymentmethods-container']" position="after">
            <div class="paymentmethods-jetcheckout">
                <div class="payment-buttons">
                    <div class="button altlight installment-button" t-on-click="showCardInstallments">
                        <i role="img" aria-label="Installment Table" title="Installment Table" class="fa fa-list"/>
                        <span class="js_installment_table">Installment Table</span>
                    </div>
                </div>
                <ul class="card_families">
                    <t t-foreach="jetcheckout.card.family" t-as="family" t-key="family">
                        <li>
                            <img t-att-src="family" alt=""/>
                        </li>
                    </t>
                </ul>
                <ul class="card_types">
                    <t t-foreach="jetcheckout.card.type" t-as="type" t-key="type.id">
                        <li>
                            <img t-att-src="'data:image/png;base64,' + type.src" t-att-title="type.name" t-att-alt="type.name"/>
                        </li>
                    </t>
                </ul>
            </div>
        </xpath>
    </t>

    <t t-inherit="point_of_sale.Notification" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[@class='notification']" position="attributes">
            <attribute name="t-att-class">{'success': props.duration === 2001, 'danger': props.duration === 2002}</attribute>
        </xpath>
    </t>

    <t t-inherit="point_of_sale.PaymentScreenElectronicPayment" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[@class='paymentline electronic_payment']" position="attributes">
            <attribute name="t-on-click">trigger('select-electronic-payment-line', { cid: props.line.cid })</attribute>
        </xpath>
        <xpath expr="//div[@class='paymentline electronic_payment']/t[1]" position="replace">
            <t t-if="props.line.payment_status == 'pending'">
                <div>
                    Payment pending
                </div>
                <div class="button add_payment_transaction" title="Add Payment Transaction" t-on-click="trigger('add-payment-transaction', props.line)">
                    Add
                </div>
                <div class="button send_payment_request highlight" title="Send Payment Request" t-on-click="trigger('send-payment-request', props.line)">
                    Send
                </div>
            </t>
        </xpath>
        <xpath expr="//div[@class='paymentline electronic_payment']" position="inside">
            <t t-elif="props.line.payment_status == 'timeout'">
                <div>
                    Transaction expired
                </div>
                <div class="button send_payment_request highlight" title="Send Payment Request" t-on-click="trigger('send-payment-request', props.line)">
                    Retry
                </div>
            </t>
        </xpath>
        <xpath expr="//i" position="before">
            <span t-if="props.line.payment_method.use_payment_terminal === 'jetcheckout_link'" class="jetcheckout-line-info"><t t-esc="props.line.duration || 0"/> seconds left</span>
            <span t-elif="props.line.payment_method.use_payment_terminal === 'jetcheckout_physical'" class="jetcheckout-line-info"><t t-esc="props.line.transaction &amp;&amp; props.line.transaction.name || '...'"/></span>
        </xpath>
    </t>
</templates>