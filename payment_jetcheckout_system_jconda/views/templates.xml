<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="payment_sidebar" name="Payment Sidebar - jConda" inherit_id="payment_jetcheckout.payment_sidebar">
        <xpath expr="//label[@for='partner']" position="inside">
            <t t-if="show_partners">
                <a role="button" t-attf-class="btn btn-sm float-right font-weight-bold text-primary o_connector_partner_get #{'' if show_reset else 'd-none'}" href="#"><i class="fa fa-users mr-2" t-translation="off"/>Partners</a>
                <a role="button" t-attf-class="btn btn-sm float-right font-weight-bold text-primary o_connector_partner_reset #{'' if partner_related and show_reset else 'd-none'}" href="#"><i class="fa fa-undo mr-1" t-translation="off"/>Reset</a>
            </t>
        </xpath>
        <xpath expr="//span[@t-esc='partner.name']" position="attributes">
            <attribute name="t-esc">partner_related and partner_related['name'] or partner.name</attribute>
        </xpath>
    </template>

    <template id="payment_partner_balance" name="Payment System Page - jConda Partner Balance">
        <t t-foreach="balances" t-as="balance">
            <span t-esc="balance['amount']" t-attf-class="#{'text-danger' if balance['amount'] &lt; 0 else 'text-600'}" t-options="{'widget': 'monetary', 'display_currency': balance['currency']}"/>
        </t>
    </template>

    <template id="payment_page" name="Payment System Page - jConda" inherit_id="payment_jetcheckout_system.payment_page">
        <xpath expr="//t[@t-set='labels']" position="inside">
            <t t-if="show_balance">
                <label for="balance" class="text-primary font-weight-bold mt-3 mb-0 d-block">
                    Balance
                    <a t-if="show_ledger" role="button" class="btn btn-sm float-right font-weight-bold text-primary" href="/my/payment/ledger"><i class="fa fa-book mr-2" t-translation="off"/>See Ledger</a>
                </label>
                <div class="o_connector_balance d-flex flex-column">
                    <t t-call="payment_jetcheckout_system_jconda.payment_partner_balance"/>
                </div>
            </t>
        </xpath>
    </template>

    <template id="payment_page_ledger" name="Payment System Page Ledger - jConda">
        <t t-call="web.frontend_layout">
            <t t-set="no_header" t-value="True"/>
            <t t-set="no_footer" t-value="True"/>
            <t t-set="class" t-value="True"/>
            <t t-set="title" t-value="website.name"/>
            <t t-set="body_classname" t-value="'payment-page navbar-light'"/>
            <t t-set="x_icon" t-value="'/web/image?model=website&amp;id=%s&amp;field=favicon' % website.id"/>
            <div class="header row mx-0 card border p-2 px-lg-5">
                <div class="px-xl-3 mx-xl-auto mw-xl-128">
                    <img t-att-src="'/web/image/res.company/%s/logo' % company.id" t-att-alt="company.name"/>
                </div>
            </div>
            <div class="payment-transaction row justify-content-center mx-0">
                <t t-call="payment_jetcheckout.payment_sidebar">
                    <t t-set="page" t-value="'ledger'"/>
                    <t t-set="no_payment_icons" t-value="True"/>
                    <t t-set="no_card_preview" t-value="True"/>
                    <t t-set="buttons">
                        <a role="button" class="btn btn-outline-primary btn-block mt-3 font-weight-bold text-uppercase shadow text-nowrap overflow-hidden" href="/my/payment"><i class="fa fa-undo mr-2" t-translation="off"/>Payment</a>
                    </t>
                    <t t-call="payment_jetcheckout_system.payment_page_contact"/>
                </t>
                <div class="payment-system col-md-9 row justify-content-center mx-0 navbar-light">
                    <div class="px-3 py-4 bg-white card my-4 w-100">
                        <table class="table table-borderless table-responsive-md w-100 table-fold small">
                            <thead>
                                <tr class="font-weight-bold">
                                    <th class="py-3 pl-2">Date</th>
                                    <th>Due Date</th>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                    <th class="text-right">Amount</th>
                                    <th class="text-right pr-2">Balance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="currencies.items()" t-as="currency">
                                    <tr class="border">
                                        <td class="bg-primary-light font-italic pl-2 py-2" colspan="7"><span t-esc="currency[0]"/></td>
                                    </tr>
                                    <!--<t t-set="amount_balance" t-value="balance - balance_sum"/>-->
                                    <t t-foreach="currency[1]" t-as="line">
                                        <tr class="border">
                                            <td class="py-2 pl-2"><span t-esc="line['date']" t-options='{"widget": "date"}'/></td>
                                            <td><span t-esc="line['due_date']" t-options='{"widget": "date"}'/></td>
                                            <td><span t-esc="line['name']"/></td>
                                            <td><span t-esc="line['type']"/></td>
                                            <td><span t-esc="line['description']"/></td>
                                            <td class="text-right"><span t-esc="line['amount']" t-options="{'widget': 'monetary', 'display_currency': line['currency']}"/></td>
                                            <td class="border-right text-right pr-2"><span t-esc="line['balance']" t-options="{'widget': 'monetary', 'display_currency': line['currency']}"/></td>
                                        </tr>
                                        <!--<t t-set="amount_balance" t-value="amount_balance - line['balance']"/>-->
                                        </t>
                                    </t>
                            </tbody>
                        </table>
                    </div>
                    <div class="form-inline justify-content-center mt-3">
                        <t t-call="website.pager"/>
                    </div>
                </div>
            </div>
            <t t-call="payment_jetcheckout_system.payment_page_agreements"/>
            <t t-call="payment_jetcheckout_system.payment_page_footer"/>
        </t>
    </template>

    <!--<template id="payment_page_partners" name="Payment System Page Partners - jConda">
        <t t-call="web.frontend_layout">
            <t t-set="no_header" t-value="True"/>
            <t t-set="no_footer" t-value="True"/>
            <t t-set="class" t-value="True"/>
            <t t-set="title" t-value="website.name"/>
            <t t-set="body_classname" t-value="'payment-page navbar-light'"/>
            <t t-set="x_icon" t-value="'/web/image?model=website&amp;id=%s&amp;field=favicon' % website.id"/>
            <div class="header row mx-0 card border p-2 px-lg-5">
                <div class="px-xl-3 mx-xl-auto mw-xl-128">
                    <img t-att-src="'/web/image/res.company/%s/logo' % company.id" t-att-alt="company.name"/>
                </div>
            </div>
            <div class="payment-transaction row justify-content-center mx-0">
                <t t-call="payment_jetcheckout.payment_sidebar">
                    <t t-set="page" t-value="'ledger'"/>
                    <t t-set="no_payment_icons" t-value="True"/>
                    <t t-set="no_card_preview" t-value="True"/>
                    <t t-set="buttons">
                        <a role="button" class="btn btn-outline-primary btn-block mt-3 font-weight-bold text-uppercase shadow text-nowrap overflow-hidden" href="/my/payment"><i class="fa fa-undo mr-2" t-translation="off"/>Payment</a>
                    </t>
                    <t t-call="payment_jetcheckout_system.payment_page_contact"/>
                </t>
                <div class="payment-system col-md-9 row justify-content-center mx-0 navbar-light">
                    <div class="px-3 py-4 bg-white card my-4 w-100">
                        <table class="table table-borderless table-responsive-md w-100 table-fold small">
                            <thead>
                                <tr class="font-weight-bold">
                                    <th class="py-3 pl-2">VAT</th>
                                    <th>Company</th>
                                    <th>Mobile</th>
                                    <th>Email</th>
                                    <th>City</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="lines" t-as="line">
                                    <tr class="border">
                                        <td class="py-2 pl-2"><span t-esc="line['vat']"/></td>
                                        <td><span t-esc="line['company_name']"/></td>
                                        <td><span t-esc="line['mobile']"/></td>
                                        <td><span t-esc="line['email']"/></td>
                                        <td><span t-esc="line['city']"/></td>
                                        <td class="text-center pr-2"><button class="btn btn-primary btn-sm o_connector_select_partner">Select</button></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                    <div class="form-inline justify-content-center mt-3">
                        <t t-call="website.pager"/>
                    </div>
                </div>
            </div>
            <t t-call="payment_jetcheckout_system.payment_page_agreements"/>
            <t t-call="payment_jetcheckout_system.payment_page_footer"/>
        </t>
    </template>-->
</odoo>
