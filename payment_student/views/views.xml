<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="school_tree" model="ir.ui.view">
    <field name="name">res.student.school.tree</field>
    <field name="model">res.student.school</field>
    <field name="arch" type="xml">
        <tree string="Schools" editable="top" decoration-muted="active == False" sample="1">
            <field name="name"/>
            <field name="code"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
            <field name="active" widget="boolean_toggle"/>
        </tree>
    </field>
    </record>

    <record id="term_tree" model="ir.ui.view">
    <field name="name">res.student.term.tree</field>
    <field name="model">res.student.term</field>
    <field name="arch" type="xml">
        <tree string="School Terms" editable="top" decoration-muted="active == False" sample="1">
            <field name="name"/>
            <field name="code"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
            <field name="active" widget="boolean_toggle"/>
        </tree>
    </field>
    </record>

    <record id="bursary_tree" model="ir.ui.view">
    <field name="name">res.student.bursary.tree</field>
    <field name="model">res.student.bursary</field>
    <field name="arch" type="xml">
        <tree string="Bursaries" editable="top" decoration-muted="active == False" sample="1">
            <field name="name"/>
            <field name="code"/>
            <field name="percentage"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
            <field name="active" widget="boolean_toggle"/>
        </tree>
    </field>
    </record>

    <record id="class_tree" model="ir.ui.view">
    <field name="name">res.student.class.tree</field>
    <field name="model">res.student.class</field>
    <field name="arch" type="xml">
        <tree string="School Classes" editable="top" decoration-muted="active == False" sample="1">
            <field name="name"/>
            <field name="code"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
            <field name="active" widget="boolean_toggle"/>
        </tree>
    </field>
    </record>

    <record id="payment_type_tree" model="ir.ui.view">
    <field name="name">res.student.payment.type.tree</field>
    <field name="model">res.student.payment.type</field>
    <field name="arch" type="xml">
        <tree string="Payment Types" editable="top" decoration-muted="active == False" sample="1">
            <field name="name"/>
            <field name="code"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
            <field name="active" widget="boolean_toggle"/>
        </tree>
    </field>
    </record>

    <record id="payment_template_tree" model="ir.ui.view">
    <field name="name">res.student.template.tree</field>
    <field name="model">res.student.template</field>
    <field name="arch" type="xml">
        <tree string="Payment Templates" editable="top" sample="1">
            <field name="school_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="class_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="term_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="bursary_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="payment_type_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="amount"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
            <field name="currency_id" force_save="1" invisible="1"/>
        </tree>
    </field>
    </record>

    <record id="payment_tree" model="ir.ui.view">
    <field name="name">res.student.payment.tree</field>
    <field name="model">res.student.payment</field>
    <field name="arch" type="xml">
        <tree string="Payment Items" editable="top" sample="1">
            <header>
                <button name="action_payment_table" type="object" string="Payment Table"/>
            </header>
            <field name="student_id" options="{'no_open': True, 'no_create': True}" invisible="context.get('domain',False)" domain="[('is_sps','=',True),('parent_id','!=',False),('company_id','=',company_id)]"/>
            <field name="limited_student_id" string="Student" options="{'no_open': True, 'no_create': True}" invisible="not context.get('domain',False)" domain="[('id','in',context.get('domain',[]))]"/>
            <field name="parent_id" force_save="1" options="{'no_open': True}" domain="[('parent_id','=',False),('company_id','=',company_id)]"/>
            <field name="school_id" force_save="1" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="class_id" force_save="1" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="term_id" force_save="1" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="bursary_id" force_save="1" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="payment_type_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
            <field name="amount" attrs="{'readonly': [('paid','=',True)]}"/>
            <field name="paid"/>
            <field name="paid_amount" attrs="{'invisible': [('paid', '=', False)]}"/>
            <field name="paid_date" attrs="{'invisible': [('paid', '=', False)]}" optional="show"/>
            <button name="action_transaction" string="Details" type="object" icon="fa-credit-card" attrs="{'invisible': [('paid', '=', False)]}"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}" optional="hide"/>
            <field name="currency_id" force_save="1" invisible="1"/>
        </tree>
    </field>
    </record>

    <record id="payment_pivot" model="ir.ui.view">
    <field name="name">res.student.payment.pivot</field>
    <field name="model">res.student.payment</field>
    <field name="arch" type="xml">
        <pivot string="Payment Items">
            <field name="paid_date" type="row"/>
            <field name="amount" type="measure"/>
        </pivot>
    </field>
    </record>

    <record id="student_tree" model="ir.ui.view">
    <field name="name">res.partner.student.tree</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
        <tree string="Students" decoration-muted="active == False" sample="1">
            <field name="active" invisible="1"/>
            <field name="name"/>
            <field name="vat" string="Vat"/>
            <field name="ref"/>
            <field name="school_id"/>
            <field name="class_id"/>
            <field name="parent_id" string="Parent"/>
            <field name="bursary_id"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
        </tree>
    </field>
    </record>

    <record id="parent_tree" model="ir.ui.view">
    <field name="name">res.partner.parent.tree</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
        <tree string="Parents" decoration-muted="active == False" sample="1">
            <header>
                <button name="action_send" type="object" string="Send Email"/>
            </header>
            <field name="active" invisible="1"/>
            <field name="name"/>
            <field name="vat" string="Vat"/>
            <field name="mobile"/>
            <field name="email"/>
            <field name="date_email_sent" optional="hide"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
        </tree>
    </field>
    </record>

    <record id="school_form" model="ir.ui.view">
    <field name="name">res.student.school.form</field>
    <field name="model">res.student.school</field>
    <field name="arch" type="xml">
        <form string="Schools">
            <sheet>
                <group>
                    <field name="name"/>
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
                    <field name="active" invisible="1"/>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="class_form" model="ir.ui.view">
    <field name="name">res.student.class.form</field>
    <field name="model">res.student.class</field>
    <field name="arch" type="xml">
        <form string="Classes">
            <sheet>
                <group>
                    <field name="name"/>
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
                    <field name="active" invisible="1"/>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="term_form" model="ir.ui.view">
    <field name="name">res.student.term.form</field>
    <field name="model">res.student.term</field>
    <field name="arch" type="xml">
        <form string="Terms">
            <sheet>
                <group>
                    <field name="name"/>
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
                    <field name="active" invisible="1"/>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="bursary_form" model="ir.ui.view">
    <field name="name">res.student.bursary.form</field>
    <field name="model">res.student.bursary</field>
    <field name="arch" type="xml">
        <form string="Bursaries">
            <sheet>
                <group>
                    <group>
                        <field name="name"/>
                        <field name="active" invisible="1"/>
                    </group>
                    <group>
                        <label for="percentage"/>
                        <div class="o_row">
                            <field name="percentage" nolabel="1"/>
                        </div>
                    </group>
                </group>
                <group>
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="payment_type_form" model="ir.ui.view">
    <field name="name">res.student.payment.type.form</field>
    <field name="model">res.student.payment.type</field>
    <field name="arch" type="xml">
        <form string="Payment Types">
            <sheet>
                <group>
                    <field name="name"/>
                    <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
                    <field name="active" invisible="1"/>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="student_form" model="ir.ui.view">
    <field name="name">res.partner.student.form</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
        <form string="Students">
            <field name="is_sps" invisible="1"/>
            <sheet>
                <div class="oe_button_box" name="button_box">
                    <button name="action_payment" type="object" class="oe_stat_button" icon="fa-money" attrs="{'invisible': [('id','=',False)]}">
                      <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value"><field name="payment_count" nolabel="1"/></span>
                        <span class="o_stat_text" style="font-weight: bold;">Items To Pay</span>
                      </div>
                    </button>
                </div>
                <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                <field name="avatar_128" invisible="1"/>
                <field name="image_1920" widget="image" class="oe_avatar" options="{'preview_image': 'avatar_128'}"/>
                <div class="oe_title">
                    <label for="name"/>
                    <h1>
                        <field name="name" attrs="{'required': [('is_sps','=',True)]}"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="vat" string="Vat"/>
                        <field name="lang"/>
                        <field name="parent_id" string="Parent" context="{'show_address': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('is_sps','=',True),('company_id','=',company_id)]"/>
                        <field name="id" invisible="1"/>
                        <field name="active" invisible="1"/>
                    </group>
                    <group>
                        <field name="school_id" options="{'no_open': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('company_id','=',company_id)]"/>
                        <field name="class_id" options="{'no_open': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('company_id','=',company_id)]"/>
                        <field name="ref"/>
                        <field name="bursary_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
                        <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}" attrs="{'required': [('is_sps','=',True)]}"/>
                    </group>
                </group>
                <notebook>
                    <page string="Siblings" autofocus="autofocus" attrs="{'invisible': [('sibling_ids','=',[])]}">
                        <field name="sibling_ids" mode="kanban">
                            <kanban>
                                <field name="id"/>
                                <field name="name"/>
                                <field name="school_id"/>
                                <field name="image_128"/>
                                <field name="avatar_128"/>
                                <templates>
                                    <t t-name="kanban-box">
                                        <div class="oe_kanban_global_click">
                                            <div class="o_kanban_image">
                                                <img alt="" t-if="record.image_128.raw_value" t-att-src="kanban_image('res.partner', 'avatar_128', record.id.raw_value)"/>
                                                <img alt="" t-else="" t-att-src="_s + &quot;/base/static/img/avatar_grey.png&quot;"/>
                                            </div>
                                            <div class="oe_kanban_details">
                                                <strong><field name="name"/></strong>
                                                <ul>
                                                    <li><field name="school_id"/></li>
                                                    <li><field name="class_id"/></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                            <form>
                                <field name="is_sps" invisible="1"/>
                                <sheet>
                                    <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                                    <field name="avatar_128" invisible="1"/>
                                    <field name="image_1920" widget="image" class="oe_avatar" options="{'preview_image': 'avatar_128'}"/>
                                    <div class="oe_title">
                                        <label for="name"/>
                                        <h1>
                                            <field name="name" attrs="{'required': [('is_sps','=',True)]}"/>
                                        </h1>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="vat" string="Vat"/>
                                            <field name="lang"/>
                                            <field name="parent_id" string="Parent" context="{'show_address': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('is_sps','=',True),('company_id','=',company_id)]"/>
                                            <field name="id" invisible="1"/>
                                            <field name="active" invisible="1"/>
                                        </group>
                                        <group>
                                            <field name="school_id" options="{'no_open': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('company_id','=',company_id)]"/>
                                            <field name="class_id" options="{'no_open': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('company_id','=',company_id)]"/>
                                            <field name="ref"/>
                                            <field name="bursary_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
                                            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}" attrs="{'required': [('is_sps','=',True)]}"/>
                                        </group>
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </page>
                </notebook>
            </sheet>
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="activity_ids" widget="mail_activity"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
        </form>
    </field>
    </record>

    <record id="parent_form" model="ir.ui.view">
    <field name="name">res.partner.parent.form</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
        <form string="Parents">
            <field name="is_sps" invisible="1"/>
            <header>
                <button name="action_share_payment_link" type="object" string="Share Payment Link" class="oe_highlight" attrs="{'invisible': [('payment_count', '=', 0)]}"/>
                <button name="action_send" type="object" string="Send Email" attrs="{'invisible': [('payment_count', '=', 0)]}"/>
            </header>
            <sheet>
                <div class="oe_button_box" name="button_box">
                    <button name="action_payment" type="object" class="oe_stat_button" icon="fa-money" attrs="{'invisible': [('id','=',False)]}">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value"><field name="payment_count" nolabel="1"/></span>
                        <span class="o_stat_text" style="font-weight: bold;">Items To Pay</span>
                    </div>
                    </button>
                </div>
                <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                <field name="avatar_128" invisible="1"/>
                <field name="image_1920" widget="image" class="oe_avatar" options="{'preview_image': 'avatar_128'}"/>
                <div class="oe_title">
                    <label for="name"/>
                    <h1>
                        <field name="name" attrs="{'required': [('is_sps','=',True)]}"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="vat" string="Vat"/>
                        <field name="lang"/>
                        <field name="id" invisible="1"/>
                        <field name="active" invisible="1"/>
                    </group>
                    <group>
                        <field name="school_ids" widget="many2many_tags"/>
                        <field name="mobile" widget="phone"/>
                        <field name="email" widget="email" attrs="{'required': [('is_sps','=',True)]}"/>
                        <field name="date_email_sent"/>
                        <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}" attrs="{'required': [('is_sps','=',True)]}"/>
                    </group>
                </group>
                <notebook>
                    <page string="Children" autofocus="autofocus" attrs="{'invisible': [('child_ids','=',[])]}">
                        <field name="child_ids" mode="kanban">
                            <kanban>
                                <field name="id"/>
                                <field name="name"/>
                                <field name="school_id"/>
                                <field name="image_128"/>
                                <field name="avatar_128"/>
                                <templates>
                                    <t t-name="kanban-box">
                                        <div class="oe_kanban_global_click">
                                            <div class="o_kanban_image">
                                                <img alt="" t-if="record.image_128.raw_value" t-att-src="kanban_image('res.partner', 'avatar_128', record.id.raw_value)"/>
                                                <img alt="" t-else="" t-att-src="_s + &quot;/base/static/img/avatar_grey.png&quot;"/>
                                            </div>
                                            <div class="oe_kanban_details">
                                                <strong><field name="name"/></strong>
                                                <ul>
                                                    <li><field name="school_id"/></li>
                                                    <li><field name="class_id"/></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                            <form>
                                <field name="is_sps" invisible="1"/>
                                <sheet>
                                    <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                                    <field name="avatar_128" invisible="1"/>
                                    <field name="image_1920" widget="image" class="oe_avatar" options="{'preview_image': 'avatar_128'}"/>
                                    <div class="oe_title">
                                        <label for="name"/>
                                        <h1>
                                            <field name="name" attrs="{'required': [('is_sps','=',True)]}"/>
                                        </h1>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="vat" string="Vat"/>
                                            <field name="lang"/>
                                            <field name="parent_id" string="Parent" context="{'show_address': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('is_sps','=',True),('company_id','=',company_id)]"/>
                                            <field name="id" invisible="1"/>
                                            <field name="active" invisible="1"/>
                                        </group>
                                        <group>
                                            <field name="school_id" options="{'no_open': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('company_id','=',company_id)]"/>
                                            <field name="class_id" options="{'no_open': True}" attrs="{'required': [('is_sps','=',True)]}" domain="[('company_id','=',company_id)]"/>
                                            <field name="ref"/>
                                            <field name="bursary_id" options="{'no_open': True}" domain="[('company_id','=',company_id)]"/>
                                            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}" attrs="{'required': [('is_sps','=',True)]}"/>
                                        </group>
                                    </group>
                                </sheet>
                            </form>
                        </field>
                    </page>
                </notebook>
            </sheet>
            <div class="oe_chatter">
                <field name="message_follower_ids" widget="mail_followers"/>
                <field name="activity_ids" widget="mail_activity"/>
                <field name="message_ids" widget="mail_thread"/>
            </div>
        </form>
    </field>
    </record>

    <record id="setting_form" model="ir.ui.view">
    <field name="name">res.student.setting.form</field>
    <field name="model">res.student.setting</field>
    <field name="arch" type="xml">
        <form string="Settings">
            <sheet>
                <group>
                    <group string="Sibling Discount">
                        <field string="Active" name="is_discount_sibling" widget="boolean_toggle"/>
                        <label for="discount_sibling" string="Discount Rate" attrs="{'invisible': [('is_discount_sibling','=',False)]}"/>
                        <div class="o_row" attrs="{'invisible': [('is_discount_sibling','=',False)]}">
                            % <field name="discount_sibling" attrs="{'required': [('is_discount_sibling','!=',False)]}"/>
                        </div>
                        <br colspan="2"/>
                        <field name="discount_maximum" attrs="{'invisible': [('is_discount_sibling','=',False)]}" widget="boolean_toggle"/>
                        <label for="discount_maximum" string="" attrs="{'invisible': [('is_discount_sibling','=',False)]}"/>
                        <div class="text-muted" attrs="{'invisible': [('is_discount_sibling','=',False)]}">
                            Select maximum rate between <strong>Sibling Discount</strong> and <strong>Bursary Discount</strong>
                        </div>
                        <field name="company_id" invisible="1"/>
                    </group>
                    <group string="Advance Payment Discount">
                        <field string="Active" name="is_discount_advance" widget="boolean_toggle"/>
                        <field name="discount_advance_ids" nolabel="1" colspan="2" attrs="{'invisible': [('is_discount_advance','=',False)]}">
                            <tree editable="top" limit="5">
                                <field name="date_start"/>
                                <field name="date_end"/>
                                <field name="installment"/>
                                <field name="percentage"/>
                            </tree>
                        </field>
                    </group>
                </group>
                <notebook>
                    <page string="Footer" autofocus="autofocus">
                        <field name="website_footer" widget="html" options="{'style-inline': true, 'codeview': true}"/>
                    </page>
                    <page string="Contact">
                        <field name="contact_page" widget="html" options="{'style-inline': true, 'codeview': true}"/>
                    </page>
                    <page string="Privacy Policy">
                        <field name="privacy_policy" widget="html" options="{'style-inline': true, 'codeview': true}"/>
                    </page>
                    <page string="Distant Sale Agreement">
                        <field name="sale_agreement" widget="html" options="{'style-inline': true, 'codeview': true}"/>
                    </page>
                    <page string="Membership Agreement">
                        <field name="membership_agreement" widget="html" options="{'style-inline': true, 'codeview': true}"/>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
    </record>

    <record id="payment_table_form" model="ir.ui.view">
    <field name="name">res.student.payment.table.form</field>
    <field name="model">res.student.payment.table</field>
    <field name="arch" type="xml">
        <form string="Payment Table">
            <sheet>
                <group colspan="2">
                    <field name="table" colspan="2" nolabel="1"/>
                </group>
            </sheet>
            <footer/>
        </form>
    </field>
    </record>

    <record id="school_search" model="ir.ui.view">
    <field name="name">res.student.school.search</field>
    <field name="model">res.student.school</field>
    <field name="arch" type="xml">
        <search string="Schools">
            <field name="name"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_active" string="Active" domain="[('active', '=', True)]"/>
        </search>
    </field>
    </record>

    <record id="term_search" model="ir.ui.view">
    <field name="name">res.student.term.search</field>
    <field name="model">res.student.term</field>
    <field name="arch" type="xml">
        <search string="Terms">
            <field name="name"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_active" string="Active" domain="[('active', '=', True)]"/>
        </search>
    </field>
    </record>

    <record id="bursary_search" model="ir.ui.view">
    <field name="name">res.student.bursary.search</field>
    <field name="model">res.student.bursary</field>
    <field name="arch" type="xml">
        <search string="Bursaries">
            <field name="name"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_active" string="Active" domain="[('active', '=', True)]"/>
        </search>
    </field>
    </record>

    <record id="class_search" model="ir.ui.view">
    <field name="name">res.student.class.search</field>
    <field name="model">res.student.class</field>
    <field name="arch" type="xml">
        <search string="Classes">
            <field name="name"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_active" string="Active" domain="[('active', '=', True)]"/>
        </search>
    </field>
    </record>

    <record id="payment_type_search" model="ir.ui.view">
    <field name="name">res.student.payment.type.search</field>
    <field name="model">res.student.payment.type</field>
    <field name="arch" type="xml">
        <search string="Payment Types">
            <field name="name"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_active" string="Active" domain="[('active', '=', True)]"/>
        </search>
    </field>
    </record>

    <record id="payment_search" model="ir.ui.view">
    <field name="name">res.student.payment.search</field>
    <field name="model">res.student.payment</field>
    <field name="arch" type="xml">
        <search string="Payment Items">
            <field name="name"/>
            <field name="student_id"/>
            <field name="parent_id"/>
            <field name="school_id"/>
            <field name="class_id"/>
            <field name="term_id"/>
            <field name="bursary_id"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_paid" string="Paid" domain="[('paid', '=', True)]"/>
            <group expand="0" string="Groupby">
                <filter string="Student" name="groupby_student" domain="[]" context="{'group_by':'student_id'}"/>
                <filter string="Parent" name="groupby_parent" domain="[]" context="{'group_by':'parent_id'}"/>
                <filter string="School" name="groupby_school" domain="[]" context="{'group_by':'school_id'}"/>
                <filter string="Class" name="groupby_class" domain="[]" context="{'group_by':'class_id'}"/>
                <filter string="Term" name="groupby_term" domain="[]" context="{'group_by':'term_id'}"/>
                <filter string="Bursary" name="groupby_bursary" domain="[]" context="{'group_by':'bursary_id'}"/>
                <filter string="Company" name="groupby_company" domain="[]" context="{'group_by':'company_id'}"/>
                <filter string="Paid" name="groupby_paid" domain="[]" context="{'group_by':'paid'}"/>
            </group>
        </search>
    </field>
    </record>

    <record id="student_search" model="ir.ui.view">
    <field name="name">res.partner.student.search</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
        <search string="Students">
            <field name="name"/>
            <field name="vat"/>
            <field name="ref"/>
            <field name="school_id"/>
            <field name="class_id"/>
            <field name="parent_id"/>
            <field name="bursary_id"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_active" string="Active" domain="[('active', '=', True)]"/>
            <group expand="0" string="Groupby">
                <filter string="Parent" name="groupby_parent" domain="[]" context="{'group_by':'parent_id'}"/>
                <filter string="School" name="groupby_school" domain="[]" context="{'group_by':'school_id'}"/>
                <filter string="Class" name="groupby_class" domain="[]" context="{'group_by':'class_id'}"/>
                <filter string="Bursary" name="groupby_bursary" domain="[]" context="{'group_by':'bursary_id'}"/>
                <filter string="Company" name="groupby_company" domain="[]" context="{'group_by':'company_id'}"/>
            </group>
        </search>
    </field>
    </record>

    <record id="parent_search" model="ir.ui.view">
    <field name="name">res.partner.parent.search</field>
    <field name="model">res.partner</field>
    <field name="arch" type="xml">
        <search string="Parents">
            <field name="name"/>
            <field name="vat"/>
            <field name="mobile"/>
            <field name="company_id" groups="base.group_multi_company"/>
            <filter name="filterby_active" string="Active" domain="[('active', '=', True)]"/>
            <separator/>
            <filter name="filterby_payment" string="Has Payments" domain="[('payment_ids', '=', '')]"/>
            <filter name="filterby_no_payment" string="Has No Payments" domain="[('payment_ids', '!=', '')]"/>
            <separator/>
            <filter name="filterby_sent_today" string="Sent Email Today" domain="[('date_email_sent', '&gt;=', (datetime.datetime.combine(context_today(), datetime.time(0,0,0)).to_utc()).strftime('%Y-%m-%d %H:%M:%S'))]"/>
            <filter name="filterby_sent_before" string="Sent Email Before" domain="[('date_email_sent', '&lt;', (datetime.datetime.combine(context_today(), datetime.time(0,0,0)).to_utc()).strftime('%Y-%m-%d %H:%M:%S'))]"/>
            <filter name="filterby_sent_no" string="No Sent Email" domain="[('date_email_sent', '=', False)]"/>
            <group expand="0" string="Groupby">
                <filter string="Company" name="groupby_company" domain="[]" context="{'group_by':'company_id'}"/>
            </group>
            <searchpanel>
                <field name="school_ids" select="multi" icon="fa-tag" enable_counters="1"/>
            </searchpanel>
        </search>
    </field>
    </record>

    <record id="payment_transaction_form" model="ir.ui.view">
    <field name="model">payment.transaction</field>
    <field name="inherit_id" ref="payment_jetcheckout.transaction_jetcheckout"/>
    <field name="arch" type="xml">
        <xpath expr='//button[@name="jetcheckout_payment"]' position="before">
            <button type="object" name="action_student_payments" class="oe_stat_button" icon="fa-users" attrs="{'invisible': ['|',('is_jetcheckout','=',False),('student_payment_count', '=', 0)]}">
                <div class="o_form_field o_stat_info mr3">
                    <span class="o_stat_value"><field name="student_payment_count"/></span><span class="o_stat_text">Student Payment</span>
                </div>
            </button>
        </xpath>
        <xpath expr='//button[@name="jetcheckout_payment"]' position="replace"/>
        <xpath expr='//field[@name="payment_id"]' position="replace">
            <field name="payment_id" invisible="1"/>
        </xpath>
    </field>
    </record>

    <record id="payment_transaction_list" model="ir.ui.view">
    <field name="model">payment.transaction</field>
    <field name="inherit_id" ref="payment.payment_transaction_list"/>
    <field name="arch" type="xml">
        <xpath expr='//field[@name="partner_name"]' position="replace">
            <field name="partner_name" invisible="1"/>
        </xpath>
    </field>
    </record>

    <!--<record id="view_website_form" model="ir.ui.view">
    <field name="model">website</field>
    <field name="inherit_id" ref="website.view_website_form"/>
    <field name="arch" type="xml">
        <xpath expr='//page[@name="notebook"]' position="inside">
            <page string="Footer">
                <field name="footer" nolabel="1"/>
            </page>
        </xpath>
    </field>
    </record>-->

    <record id="view_partner_form" model="ir.ui.view">
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="arch" type="xml">
        <xpath expr='//div[@role="alert"]' position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr='//div[@name="button_box"]' position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr='//field[@name="company_type"]' position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr='//field[@name="parent_id"]/..' position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr='//notebook' position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr='//field[@name="function"]' position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr='//field[@name="function"]' position="before">
            <field name="is_sps" widget="boolean_toggle" groups="group_sps_manager"/>
        </xpath>
    </field>
    </record>

    <record id="action_school" model="ir.actions.act_window">
    <field name="name">Schools</field>
    <field name="res_model">res.student.school</field>
    <field name="view_mode">tree</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    </record>

    <record id="action_class" model="ir.actions.act_window">
    <field name="name">Classes</field>
    <field name="res_model">res.student.class</field>
    <field name="view_mode">tree</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    </record>

    <record id="action_term" model="ir.actions.act_window">
    <field name="name">Terms</field>
    <field name="res_model">res.student.term</field>
    <field name="view_mode">tree</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    </record>

    <record id="action_bursary" model="ir.actions.act_window">
    <field name="name">Bursaries</field>
    <field name="res_model">res.student.bursary</field>
    <field name="view_mode">tree</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    </record>

    <record id="action_payment_type" model="ir.actions.act_window">
    <field name="name">Payment Types</field>
    <field name="res_model">res.student.payment.type</field>
    <field name="view_mode">tree</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    </record>

    <record id="action_payment_template" model="ir.actions.act_window">
    <field name="name">Payment Template</field>
    <field name="res_model">res.student.payment.template</field>
    <field name="view_mode">tree</field>
    </record>

    <record id="action_payment" model="ir.actions.act_window">
    <field name="name">Payments</field>
    <field name="res_model">res.student.payment</field>
    <field name="view_mode">tree,pivot</field>
    </record>

    <record id="action_payment_table" model="ir.actions.act_window">
    <field name="name">Payment Table</field>
    <field name="res_model">res.student.payment.table</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
    </record>

    <record id="action_student" model="ir.actions.act_window">
    <field name="name">Students</field>
    <field name="res_model">res.partner</field>
    <field name="view_mode">tree,kanban,form,activity</field>
    <field name="domain">[('is_sps','=',True),('parent_id','!=',False),'|',('active','=',False),('active','=',True)]</field>
    <field name="context">{'default_is_sps': True}</field>
    <field name="search_view_id" ref="student_search"/>
    <field name="view_ids" eval="[
        (5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('student_tree')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('student_form')}),
    ]"/>
    </record>

    <record id="action_parent" model="ir.actions.act_window">
    <field name="name">Parents</field>
    <field name="res_model">res.partner</field>
    <field name="view_mode">tree,kanban,form,activity</field>
    <field name="domain">[('is_sps','=',True),('parent_id','=',False),'|',('active','=',False),('active','=',True)]</field>
    <field name="context">{'default_is_sps': True}</field>
    <field name="search_view_id" ref="parent_search"/>
    <field name="view_ids" eval="[
        (5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('parent_tree')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('parent_form')}),
    ]"/>
    </record>

    <record id="action_settings" model="ir.actions.server">
    <field name="name">Other Settings</field>
    <field name="model_id" ref="payment_student.model_res_student_setting"/>
    <field name="state">code</field>
    <field name="code">action = env['res.student.setting'].action_settings()</field>
    </record>

    <record id="parent_share" model="ir.actions.server">
    <field name="name">Share Payment Link</field>
    <field name="model_id" ref="payment_student.model_res_partner"/>
    <field name="binding_model_id" ref="payment_student.model_res_partner"/>
    <field name="binding_view_types">form</field>
    <field name="state">code</field>
    <field name="code">action = records.action_share()</field>
    </record>

    <record id="action_websites" model="ir.actions.act_window">
    <field name="name">Websites</field>
    <field name="res_model">website</field>
    <field name="view_mode">tree,form</field>
    </record>

    <record id="action_company" model="ir.actions.act_window">
    <field name="name">Companies</field>
    <field name="res_model">res.company</field>
    <field name="view_mode">tree,form</field>
    </record>

    <record id="action_user" model="ir.actions.act_window">
    <field name="name">Users</field>
    <field name="res_model">res.users</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">[('is_sps','=',True)]</field>
    </record>

    <record id="action_mail_template" model="ir.actions.act_window">
    <field name="name">Email Templates</field>
    <field name="res_model">mail.template</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{'setting': True}</field>
    </record>

    <record id="action_mail_server" model="ir.actions.act_window">
    <field name="name">Mail Servers</field>
    <field name="res_model">ir.mail_server</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{'setting': True}</field>
    </record>

    <record id="action_acquirer" model="ir.actions.act_window">
    <field name="name">Payment Acquirers</field>
    <field name="res_model">payment.acquirer</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{'setting': True}</field>
    </record>

    <record id="action_transaction" model="ir.actions.act_window">
    <field name="name">Payment Transactions</field>
    <field name="res_model">payment.transaction</field>
    <field name="view_mode">tree,form</field>
    <field name="context">{'setting': True, 'create': False, 'edit': False, 'delete': False}</field>
    </record>

    <menuitem id="menu_main" name="SPS" web_icon="hr,static/description/icon.png" sequence="24"/>
    <menuitem id="menu_student" action="action_student" parent="menu_main" sequence="0"/>
    <menuitem id="menu_parent" action="action_parent" parent="menu_main" sequence="1"/>
    <menuitem id="menu_payments" name="Payments" parent="menu_main" sequence="2"/>
    <menuitem id="menu_payment" action="action_payment" parent="menu_payments" sequence="1"/>
    <menuitem id="menu_transaction" action="action_transaction" parent="menu_payments" sequence="2"/>

    <menuitem id="menu_setting" name="Settings" web_icon="base,static/description/settings.png" sequence="25" groups="group_sps_manager"/>
    <menuitem id="menu_companies" name="Company Settings" parent="menu_setting" sequence="1"/>
    <menuitem id="menu_company" action="action_company" parent="menu_companies" sequence="1"/>
    <menuitem id="menu_user" action="action_user" parent="menu_companies" sequence="2"/>

    <menuitem id="menu_schools" name="School Settings" parent="menu_setting" sequence="2"/>
    <menuitem id="menu_school" action="action_school" parent="menu_schools" sequence="1"/>
    <menuitem id="menu_class" action="action_class" parent="menu_schools" sequence="2"/>
    <menuitem id="menu_term" action="action_term" parent="menu_schools" sequence="3"/>
    <menuitem id="menu_bursary" action="action_bursary" parent="menu_schools" sequence="4"/>
    <menuitem id="menu_payment_type" action="action_payment_type" parent="menu_schools" sequence="5"/>
    <menuitem id="menu_payment_template" action="action_payment_template" parent="menu_schools" sequence="6"/>

    <menuitem id="menu_websites" action="action_websites" name="Website Settings" parent="menu_setting" sequence="3"/>
    <menuitem id="menu_acquirer" action="action_acquirer" name="Payment Settings" parent="menu_setting" sequence="4"/>

    <menuitem id="menu_emails" name="Email Settings" parent="menu_setting" sequence="5"/>
    <menuitem id="menu_mail_template" action="action_mail_template" parent="menu_emails" sequence="1"/>
    <menuitem id="menu_mail_server" action="action_mail_server" parent="menu_emails" sequence="2"/>

    <menuitem id="menu_settings" action="action_settings" name="Other Settings" parent="menu_setting" sequence="99"/>
</odoo>
