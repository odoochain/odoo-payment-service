<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="api_applications_form" model="ir.ui.view">
    <field name="name">payment.acquirer.jetcheckout.api.applications.form</field>
    <field name="model">payment.acquirer.jetcheckout.api.applications</field>
    <field name="arch" type="xml">
        <form string="Applications">
            <field name="acquirer_id" invisible="1" readonly="1"/>
            <field name="application_ids" nolabel="1" mode="kanban" colspan="2">
                <kanban string="Applications" create="0" delete="0" default_order="is_active desc">
                    <field name="name"/>
                    <field name="application_id"/>
                    <field name="secret_key"/>
                    <field name="is_active"/>
                    <field name="virtual_poses"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_global_click my-2 p-0 overflow-hidden #{record.is_active.raw_value ? '' : 'text-400'}" style="border-width: 2px; width: 250px">
                                <div t-attf-class="o_kanban_image font-weight-bold text-center h-100 d-flex flex-column justify-content-center bg-100 border-right h5 shadow #{record.is_active.raw_value ? 'text-primary' : 'text-400'}">
                                    <t t-if="record.is_active.raw_value">
                                        <i class="fa fa-check"/><br/>Active
                                    </t>
                                    <t t-else="">
                                        <i class="fa fa-times"/><br/>Passive
                                    </t>
                                </div>
                                <div class="oe_kanban_details">
                                    <div t-attf-class="font-weight-bold mt-3 text-center h4 #{record.is_active.raw_value ? '' : 'text-400'}"><t t-esc="record.name.value"/></div>
                                    <div class="my-3">
                                        <div><strong>API Key:</strong> <t t-esc="record.application_id.value"/></div>
                                        <div><strong>Secret Key:</strong> <t t-esc="record.secret_key.value"/></div>
                                        <div class="font-italic"><t t-esc="record.virtual_poses.value"/></div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
            <footer>
                <button special="cancel" class="btn-secondary" string="Close"/>
            </footer>
        </form>
    </field>
    </record>

    <record id="api_application_form" model="ir.ui.view">
    <field name="name">payment.acquirer.jetcheckout.api.application.form</field>
    <field name="model">payment.acquirer.jetcheckout.api.application</field>
    <field name="arch" type="xml">
        <form string="Applications">
            <field name="acquirer_id" invisible="1" readonly="1"/>
            <group>
                <group>
                    <field name="name" required="1"/>
                    <field name="application_id" readonly="1" attrs="{'invisible': [('application_id','=',False)]}"/>
                    <field name="secret_key" readonly="1" attrs="{'invisible': [('application_id','=',False)]}"/>
                    <field name="virtual_poses" readonly="1" attrs="{'invisible': [('application_id','=',False)]}"/>
                </group>
                <group>
                    <field name="id" invisible="1"/>
                    <field name="is_active" widget="boolean_toggle"/>
                    <field name="first_selection" attrs="{'invisible': [('application_id','=',False)]}"/>
                    <field name="second_selection" attrs="{'invisible': [('application_id','=',False)]}"/>
                    <field name="third_selection" attrs="{'invisible': [('application_id','=',False)]}"/>
                </group>
                <notebook colspan="2">
                    <page name="pos" string="Virtual Pos">
                        <field name="pos_ids" nolabel="1" domain="[('application_ids','in',[id])]">
                            <tree string="Virtual Pos" create="0" edit="0" delete="0">
                                <field name="name"/>
                                <field name="provider_id"/>
                                <field name="is_active"/>
                                <field name="priority"/>
                                <field name="usage_3d"/>
                                <field name="mode"/>
                            </tree>
                        </field>
                    </page>
                </notebook>
            </group>
            <footer>
                <button name="setup" type="object" class="btn-primary" string="Create" attrs="{'invisible': [('application_id','!=',False)]}"/>
                <button name="select" type="object" class="btn-primary" string="Select" attrs="{'invisible': [('application_id','=',False)]}"/>
                <button special="save" class="btn-secondary" string="Save" attrs="{'invisible': [('application_id','=',False)]}"/>
                <button special="cancel" class="btn-secondary" string="Close"/>
            </footer>
        </form>
    </field>
    </record>

    <record id="action_api_applications" model="ir.actions.act_window">
    <field name="name">Applications</field>
    <field name="res_model">payment.acquirer.jetcheckout.api.applications</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
    </record>

</odoo>
