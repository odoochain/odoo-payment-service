<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="connector_tree" model="ir.ui.view">
    <field name="name">ir.connector.tree</field>
    <field name="model">ir.connector</field>
    <field name="arch" type="xml">
        <tree decoration-muted="active == False" sample="1">
            <field name="sequence" widget="handle"/>
            <field name="name"/>
            <field name="type" required="1"/>
            <field name="subtype" options="{'no_create': True, 'no_open': True}"/>
            <field name="active" widget="boolean_toggle"/>
            <button name="action_test" string="Test Connection" type="object" icon="fa-wrench" attrs="{'invisible': [('active', '=', False)]}"/>
            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}" optional="hide"/>
        </tree>
    </field>
    </record>

    <record id="connector_form" model="ir.ui.view">
    <field name="name">ir.connector.form</field>
    <field name="model">ir.connector</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="oe_title">
                    <label for="name"/>
                    <h1>
                        <field name="name"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="type" required="1"/>
                        <field name="subtype" options="{'no_create': True, 'no_open': True}" domain="[('type', '=', type)]"/>
                        <field name="server" attrs="{'invisible': [('server_required', '=', False)], 'required': [('server_required', '!=', False)]}"/>
                        <field name="username" attrs="{'invisible': [('username_required', '=', False)], 'required': [('username_required', '!=', False)]}"/>
                        <field name="password" password="True" attrs="{'invisible': [('password_required', '=', False)], 'required': [('password_required', '!=', False)]}"/>
                        <field name="server_required" invisible="1"/>
                        <field name="username_required" invisible="1"/>
                        <field name="password_required" invisible="1"/>
                    </group>
                    <group>
                        <field name="active" widget="boolean_toggle"/>
                        <field name="company_id" groups="base.group_multi_company" options="{'no_create': True, 'no_open': True}"/>
                    </group>
                    <group>
                        <button name="action_test" string="Test Connection" type="object" icon="fa-wrench" attrs="{'invisible': [('active', '=', False)]}" colspan="2" class="border-0 btn btn-block btn-secondary font-weight-bold m-3 mx-5 px-5 py-2 text-primary text-uppercase"/>
                    </group>
                </group>
                <notebook>
                    <page name="lines" string="Methods">
                        <field name="line_ids" context="{'default_company_id': company_id}"/>
                    </page>
                </notebook>
            </sheet>
        </form>
    </field>
    </record>

    <record id="connector_line_tree" model="ir.ui.view">
    <field name="name">ir.connector.line.tree</field>
    <field name="model">ir.connector.line</field>
    <field name="arch" type="xml">
        <tree>
            <field name="method_id" options="{'no_create': True, 'no_open': True}"/>
            <field name="procedure"/>
            <field name="model_id" options="{'no_create': True, 'no_open': True}"/>
            <field name="parameter_ids"/>
            <field name="response_ids"/>
            <button name="action_test" string="Test Procedure" type="object" icon="fa-terminal"/>
        </tree>
    </field>
    </record>

    <record id="connector_line_form" model="ir.ui.view">
    <field name="name">ir.connector.line.form</field>
    <field name="model">ir.connector.line</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="d-flex justify-content-center text-center">
                    <div class="d-flex flex-column">
                        <field name="method_id" options="{'no_create': True, 'no_open': True}"/>
                        <label for="method_id" class="font-weight-normal text-muted" style="font-size: 0.9rem"/>
                    </div>
                    <div class="mt-1">
                        <span class="fa fa-long-arrow-right mx-5"></span>
                    </div>
                    <div class="d-flex flex-column">
                        <field name="procedure"/>
                        <label for="procedure" class="font-weight-normal text-muted" style="font-size: 0.9rem"/>
                    </div>
                </div>
                <group>
                    <group colspan="2">
                        <field name="description" nolabel="1" colspan="2"/>
                        <div class="text-600 d-flex" colspan="2">
                            <div class="text-center pt-2 px-4">
                                <i class="fa fa-info text-primary h1"/>
                            </div>
                            <div style="font-size: 0.9rem">
                                <p style="text-indent: 10px">Please fill Parameters table with using fields in the following model. You can use a normal fields or relational fields with joined with dots in Key column. The field served from remote server which is matched with the key must be specified in Value column, then data type of this value is needed to be selected.</p>
                                <p style="text-indent: 10px">Responses table is automatically filled with selected method. Only value, which is posted from remote server as a response, and its data type have to be specified.</p>
                                <p style="text-indent: 10px">The model to be used with the method: <field name="model_id" nolabel="1" options="{'no_create': True, 'no_open': True}"/></p>
                            </div>
                        </div>
                        <field name="method_code" invisible="1"/>
                        <field name="company_id" invisible="1"/>
                    </group>
                    <group string="Parameters">
                        <field name="parameter_ids" nolabel="1" colspan="2" context="{'default_type': 'parameter'}"/>
                    </group>
                    <group string="Responses">
                        <field name="response_ids" nolabel="1" colspan="2" context="{'default_type': 'response'}">
                        <tree editable="bottom" create="0" delete="0">
                            <field name="type" invisible="1"/>
                            <field name="key" readonly="1" force_save="1"/>
                            <field name="key_type" string="Type" force_save="1"/>
                            <field name="value"/>
                            <field name="value_type" required="1" string="Type"/>
                        </tree>
                        </field>
                    </group>
                    <group>
                        <button name="action_test" string="Test Procedure" type="object" icon="fa-terminal" colspan="2" class="border-0 btn btn-block btn-secondary font-weight-bold m-3 mx-5 px-5 py-2 text-primary text-uppercase"/>
                    </group>
                    <group>
                        <button name="action_reset" string="Reset to Defaults" type="object" icon="fa-undo" colspan="2" class="border-0 btn btn-block btn-secondary font-weight-bold m-3 mx-5 px-5 py-2 text-primary text-uppercase"/>
                    </group>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="connector_line_mapping_tree" model="ir.ui.view">
    <field name="name">ir.connector.line.mapping.tree</field>
    <field name="model">ir.connector.line.mapping</field>
    <field name="arch" type="xml">
        <tree editable="bottom">
            <field name="type" invisible="1"/>
            <field name="key" force_save="1"/>
            <field name="key_type" string="Type"/>
            <field name="value"/>
            <field name="value_type" required="1" string="Type"/>
        </tree>
    </field>
    </record>

    <record id="connector_line_mapping_form" model="ir.ui.view">
    <field name="name">ir.connector.line.mapping.form</field>
    <field name="model">ir.connector.line.mapping</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="d-flex justify-content-center text-center">
                    <div class="d-flex flex-column">
                        <field name="key" options="{'no_create': True, 'no_open': True}"/>
                        <label for="key" class="font-weight-normal text-muted" style="font-size: 0.9rem"/>
                    </div>
                    <div class="mt-1">
                        <span class="fa fa-long-arrow-right mx-5"></span>
                    </div>
                    <div class="d-flex flex-column">
                        <field name="value"/>
                        <label for="value" class="font-weight-normal text-muted" style="font-size: 0.9rem"/>
                    </div>
                </div>
            </sheet>
        </form>
    </field>
    </record>

    <record id="connector_subtype_tree" model="ir.ui.view">
    <field name="name">ir.connector.subtype.tree</field>
    <field name="model">ir.connector.subtype</field>
    <field name="arch" type="xml">
        <tree>
            <field name="name"/>
            <field name="type"/>
            <field name="code"/>
        </tree>
    </field>
    </record>

    <record id="connector_subtype_form" model="ir.ui.view">
    <field name="name">ir.connector.subtype.form</field>
    <field name="model">ir.connector.subtype</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="oe_title">
                    <label for="name"/>
                    <h1>
                        <field name="name"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="type"/>
                    </group>
                    <group>
                        <field name="code"/>
                    </group>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="connector_method_tree" model="ir.ui.view">
    <field name="name">ir.connector.method.tree</field>
    <field name="model">ir.connector.method</field>
    <field name="arch" type="xml">
        <tree>
            <field name="name"/>
            <field name="model_id" options="{'no_create': True, 'no_open': True}"/>
            <field name="code"/>
        </tree>
    </field>
    </record>

    <record id="connector_method_form" model="ir.ui.view">
    <field name="name">ir.connector.method.form</field>
    <field name="model">ir.connector.method</field>
    <field name="arch" type="xml">
        <form>
            <sheet>
                <div class="oe_title">
                    <label for="name"/>
                    <h1>
                        <field name="name"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="model_id" options="{'no_create': True, 'no_open': True}"/>
                    </group>
                    <group>
                        <field name="code"/>
                    </group>
                    <group colspan="2">
                        <field name="description" nolabel="1"/>
                    </group>
                    <group string="Parameters">
                        <field name="parameter_ids" nolabel="1" colspan="2" context="{'default_type': 'parameter'}"/>
                    </group>
                    <group string="Responses">
                        <field name="response_ids" nolabel="1" colspan="2" context="{'default_type': 'response'}"/>
                    </group>
                </group>
            </sheet>
        </form>
    </field>
    </record>

    <record id="action_connector" model="ir.actions.act_window">
    <field name="name">Connectors</field>
    <field name="res_model">ir.connector</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
            No connectors yet
        </p>
        <p>
            Connectors are listed here
        </p>
    </field>
    </record>

    <record id="action_connector_subtype" model="ir.actions.act_window">
    <field name="name">Subtypes</field>
    <field name="res_model">ir.connector.subtype</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
            No connector subtypes yet
        </p>
        <p>
            Connector subtypes are listed here
        </p>
    </field>
    </record>

    <record id="action_connector_method" model="ir.actions.act_window">
    <field name="name">Methods</field>
    <field name="res_model">ir.connector.method</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">['|',('active','=',False),('active','=',True)]</field>
    <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
            No connector methods yet
        </p>
        <p>
            Connector methods are listed here
        </p>
    </field>
    </record>

    <menuitem id="menu_connectors" name="Connectors" parent="base.menu_custom" sequence="23"/>
    <menuitem id="menu_connector" action="action_connector" parent="menu_connectors"/>
    <menuitem id="menu_connector_subtype" action="action_connector_subtype" parent="menu_connectors"/>
    <menuitem id="menu_connector_method" action="action_connector_method" parent="menu_connectors"/>
</odoo>
